<?php
/**
 * Preview Page Configuration
 * Generates the PreviewConfig JavaScript object for preview.js
 * 
 * This file is included by preview.php to separate config from template
 */
?>
<!-- Preview Configuration (needed before preview.js) -->
<script>
window.PreviewConfig = {
    // URLs and settings
    baseUrl: <?= json_encode(rtrim(BASE_URL, '/')) ?>,
    adminUrl: <?= json_encode($router->url('')) ?>,
    managementUrl: <?= json_encode(rtrim(BASE_URL, '/') . '/management/') ?>,
    authToken: <?= json_encode($router->getToken()) ?>,
    structureUrl: <?= json_encode($router->url('structure')) ?>,
    multilingual: <?= json_encode(CONFIG['MULTILINGUAL_SUPPORT'] ?? false) ?>,
    defaultLang: <?= json_encode(CONFIG['LANGUAGE_DEFAULT'] ?? 'en') ?>,
    
    // Translations - common
    i18n: {
        delete: <?= json_encode(__admin('common.delete') ?? 'Delete') ?>,
        edit: <?= json_encode(__admin('common.edit') ?? 'Edit') ?>,
        error: <?= json_encode(__admin('common.error') ?? 'Error') ?>,
        loading: <?= json_encode(__admin('common.loading') ?? 'Loading') ?>,
        noResults: <?= json_encode(__admin('common.noResults') ?? 'No results') ?>,
        remove: <?= json_encode(__admin('common.remove') ?? 'Remove') ?>,
        save: <?= json_encode(__admin('common.save') ?? 'Save') ?>,
        saveFailed: <?= json_encode(__admin('common.saveFailed') ?? 'Save failed') ?>,
        saving: <?= json_encode(__admin('common.saving') ?? 'Saving') ?>,
        search: <?= json_encode(__admin('common.search') ?? 'Search') ?>,
        
        // Translations - preview
        addFrame: <?= json_encode(__admin('preview.addFrame') ?? 'Add Frame') ?>,
        addInteraction: <?= json_encode(__admin('preview.addInteraction') ?? 'Add Interaction') ?>,
        addKeyframeProperty: <?= json_encode(__admin('preview.addKeyframeProperty') ?? 'Add Property') ?>,
        addPropertyFailed: <?= json_encode(__admin('preview.addPropertyFailed') ?? 'Failed to add property') ?>,
        addStyle: <?= json_encode(__admin('preview.addStyle') ?? 'Add Style') ?>,
        animationAdded: <?= json_encode(__admin('preview.animationAdded') ?? 'Animation added') ?>,
        animationRemoved: <?= json_encode(__admin('preview.animationRemoved') ?? 'Animation removed') ?>,
        atLeastOneFrame: <?= json_encode(__admin('preview.atLeastOneFrame') ?? 'At least one frame required') ?>,
        autoGenerated: <?= json_encode(__admin('preview.autoGenerated') ?? 'Auto-generated') ?>,
        cannotDeleteLastFrame: <?= json_encode(__admin('preview.cannotDeleteLastFrame') ?? 'Cannot delete last frame') ?>,
        cannotDeleteLastProperty: <?= json_encode(__admin('preview.cannotDeleteLastProperty') ?? 'Cannot delete last property') ?>,
        clickToPickColor: <?= json_encode(__admin('preview.clickToPickColor') ?? 'Click to pick color') ?>,
        colorValue: <?= json_encode(__admin('preview.colorValue') ?? '#000000 or rgba(...)') ?>,
        componentAdded: <?= json_encode(__admin('preview.componentAdded') ?? 'Component added') ?>,
        componentUpdated: <?= json_encode(__admin('preview.componentUpdated') ?? 'Component updated') ?>,
        componentWarning: <?= json_encode(__admin('preview.componentWarning') ?? 'Editing component template - changes affect all :count usage(s)') ?>,
        confirmDeleteInteraction: <?= json_encode(__admin('preview.confirmDeleteInteraction') ?? 'Delete this interaction?') ?>,
        confirmDeleteKeyframe: <?= json_encode(__admin('preview.confirmDeleteKeyframe') ?? 'Delete this keyframe?') ?>,
        confirmDeleteNode: <?= json_encode(__admin('preview.confirmDeleteNode') ?? 'Delete this element?') ?>,
        createKeyframe: <?= json_encode(__admin('preview.createKeyframe') ?? 'Create Keyframe') ?>,
        customProperty: <?= json_encode(__admin('preview.customProperty') ?? 'Custom Property') ?>,
        deleteFrame: <?= json_encode(__admin('preview.deleteFrame') ?? 'Delete Frame') ?>,
        deleteKeyframeFailed: <?= json_encode(__admin('preview.deleteKeyframeFailed') ?? 'Failed to delete keyframe') ?>,
        deleteKeyframeProperty: <?= json_encode(__admin('preview.deleteKeyframeProperty') ?? 'Delete Property') ?>,
        deletePropertyFailed: <?= json_encode(__admin('preview.deletePropertyFailed') ?? 'Failed to delete property') ?>,
        dragToMoveFrame: <?= json_encode(__admin('preview.dragToMoveFrame') ?? 'Drag to move frame') ?>,
        dragToReorder: <?= json_encode(__admin('preview.dragToReorder') ?? 'Drag to reorder') ?>,
        editInteraction: <?= json_encode(__admin('preview.editInteraction') ?? 'Edit Interaction') ?>,
        editInTranslations: <?= json_encode(__admin('preview.editInTranslations') ?? 'Edit in Translations') ?>,
        editKeyframe: <?= json_encode(__admin('preview.editKeyframe') ?? 'Edit Keyframe') ?>,
        elementAdded: <?= json_encode(__admin('preview.elementAdded') ?? 'Element added') ?>,
        elementMoved: <?= json_encode(__admin('preview.elementMoved') ?? 'Element moved') ?>,
        elementUpdated: <?= json_encode(__admin('preview.elementUpdated') ?? 'Element updated') ?>,
        enterFramePercent: <?= json_encode(__admin('preview.enterFramePercent') ?? 'Enter frame percent (0-100)') ?>,
        enterValue: <?= json_encode(__admin('preview.enterValue') ?? 'Enter value') ?>,
        errorAddingAnimation: <?= json_encode(__admin('preview.errorAddingAnimation') ?? 'Error adding animation') ?>,
        errorLoadingKeyframes: <?= json_encode(__admin('preview.errorLoadingKeyframes') ?? 'Error loading keyframes') ?>,
        errorRemovingAnimation: <?= json_encode(__admin('preview.errorRemovingAnimation') ?? 'Error removing animation') ?>,
        failedToLoadStyles: <?= json_encode(__admin('preview.failedToLoadStyles') ?? 'Failed to load styles') ?>,
        frame: <?= json_encode(__admin('preview.frame') ?? 'Frame') ?>,
        frameExists: <?= json_encode(__admin('preview.frameExists') ?? 'Frame already exists') ?>,
        frames: <?= json_encode(__admin('preview.frames') ?? 'frames') ?>,
        interactionAdded: <?= json_encode(__admin('preview.interactionAdded') ?? 'Interaction added') ?>,
        interactionDeleted: <?= json_encode(__admin('preview.interactionDeleted') ?? 'Interaction deleted') ?>,
        interactionUpdated: <?= json_encode(__admin('preview.interactionUpdated') ?? 'Interaction updated') ?>,
        invalidKeyframeName: <?= json_encode(__admin('preview.invalidKeyframeName') ?? 'Invalid keyframe name') ?>,
        invalidPercent: <?= json_encode(__admin('preview.invalidPercent') ?? 'Invalid percent value') ?>,
        keyframeCreated: <?= json_encode(__admin('preview.keyframeCreated') ?? 'Keyframe created') ?>,
        keyframeDeleted: <?= json_encode(__admin('preview.keyframeDeleted') ?? 'Keyframe deleted') ?>,
        keyframeExistsConfirm: <?= json_encode(__admin('preview.keyframeExistsConfirm') ?? 'Keyframe exists. Overwrite?') ?>,
        keyframeNameRequired: <?= json_encode(__admin('preview.keyframeNameRequired') ?? 'Keyframe name required') ?>,
        keyframeNotFound: <?= json_encode(__admin('preview.keyframeNotFound') ?? 'Keyframe not found') ?>,
        keyframePropertyName: <?= json_encode(__admin('preview.keyframePropertyName') ?? 'property') ?>,
        keyframePropertyValue: <?= json_encode(__admin('preview.keyframePropertyValue') ?? 'value') ?>,
        keyframeSaved: <?= json_encode(__admin('preview.keyframeSaved') ?? 'Keyframe saved') ?>,
        loadAnimationsFailed: <?= json_encode(__admin('preview.loadAnimationsFailed') ?? 'Failed to load animations') ?>,
        loadKeyframeFailed: <?= json_encode(__admin('preview.loadKeyframeFailed') ?? 'Failed to load keyframe') ?>,
        loadTransitionFailed: <?= json_encode(__admin('preview.loadTransitionFailed') ?? 'Failed to load transition') ?>,
        mayBeTriggeredVia: <?= json_encode(__admin('preview.mayBeTriggeredVia') ?? 'May be triggered via') ?>,
        miniplayer: <?= json_encode(__admin('preview.miniplayer') ?? 'Miniplayer') ?>,
        newInteraction: <?= json_encode(__admin('preview.newInteraction') ?? 'New Interaction') ?>,
        noAnimationSelectors: <?= json_encode(__admin('preview.noAnimationSelectors') ?? 'No animated selectors') ?>,
        noAnimationToPreview: <?= json_encode(__admin('preview.noAnimationToPreview') ?? 'No animation to preview') ?>,
        noBaseStyles: <?= json_encode(__admin('preview.noBaseStyles') ?? 'No base styles') ?>,
        noChanges: <?= json_encode(__admin('preview.noChanges') ?? 'No changes') ?>,
        noColorVariables: <?= json_encode(__admin('preview.noColorVariables') ?? 'No color variables') ?>,
        noComponents: <?= json_encode(__admin('preview.noComponents') ?? 'No components') ?>,
        nodeDeleted: <?= json_encode(__admin('preview.nodeDeleted') ?? 'Element deleted') ?>,
        noDirectTrigger: <?= json_encode(__admin('preview.noDirectTrigger') ?? 'No direct trigger') ?>,
        noElementsFound: <?= json_encode(__admin('preview.noElementsFound') ?? 'No elements found') ?>,
        noFontVariables: <?= json_encode(__admin('preview.noFontVariables') ?? 'No font variables') ?>,
        noFramesToPreview: <?= json_encode(__admin('preview.noFramesToPreview') ?? 'No frames to preview') ?>,
        noInteractions: <?= json_encode(__admin('preview.noInteractions') ?? 'No interactions') ?>,
        noKeyframesFound: <?= json_encode(__admin('preview.noKeyframesFound') ?? 'No keyframes found') ?>,
        noParams: <?= json_encode(__admin('preview.noParams') ?? 'No parameters') ?>,
        noPropertiesFound: <?= json_encode(__admin('preview.noPropertiesFound') ?? 'No properties found') ?>,
        noPropertiesToTransition: <?= json_encode(__admin('preview.noPropertiesToTransition') ?? 'No properties to transition') ?>,
        noSpacingVariables: <?= json_encode(__admin('preview.noSpacingVariables') ?? 'No spacing variables') ?>,
        noTransitions: <?= json_encode(__admin('preview.noTransitions') ?? 'No transitions') ?>,
        noTriggerStyles: <?= json_encode(__admin('preview.noTriggerStyles') ?? 'No trigger styles') ?>,
        noTriggersWithoutTransition: <?= json_encode(__admin('preview.noTriggersWithoutTransition') ?? 'No triggers without transition') ?>,
        noVariablesAvailable: <?= json_encode(__admin('preview.noVariablesAvailable') ?? 'No variables available') ?>,
        openTransformEditor: <?= json_encode(__admin('preview.openTransformEditor') ?? 'Open Transform Editor') ?>,
        paramName: <?= json_encode(__admin('preview.paramName') ?? 'Parameter name') ?>,
        paramRequired: <?= json_encode(__admin('preview.paramRequired') ?? 'Required') ?>,
        paramValue: <?= json_encode(__admin('preview.paramValue') ?? 'Value') ?>,
        playsOn: <?= json_encode(__admin('preview.playsOn') ?? 'plays on') ?>,
        previewAnimation: <?= json_encode(__admin('preview.previewAnimation') ?? 'Preview Animation') ?>,
        previewFailed: <?= json_encode(__admin('preview.previewFailed') ?? 'Preview failed') ?>,
        previewingAnimation: <?= json_encode(__admin('preview.previewingAnimation') ?? 'Previewing animation') ?>,
        previewingHover: <?= json_encode(__admin('preview.previewingHover') ?? 'Previewing hover') ?>,
        previewNotAvailable: <?= json_encode(__admin('preview.previewNotAvailable') ?? 'Preview not available') ?>,
        propertyAdded: <?= json_encode(__admin('preview.propertyAdded') ?? 'Property added') ?>,
        propertyAlreadyExists: <?= json_encode(__admin('preview.propertyAlreadyExists') ?? 'Property already exists') ?>,
        propertyDeleted: <?= json_encode(__admin('preview.propertyDeleted') ?? 'Property deleted') ?>,
        removeFunction: <?= json_encode(__admin('preview.removeFunction') ?? 'Remove function') ?>,
        saveKeyframeFailed: <?= json_encode(__admin('preview.saveKeyframeFailed') ?? 'Failed to save keyframe') ?>,
        saveTransitionFailed: <?= json_encode(__admin('preview.saveTransitionFailed') ?? 'Failed to save transition') ?>,
        searchClass: <?= json_encode(__admin('preview.searchClass') ?? 'Search class') ?>,
        searchProperties: <?= json_encode(__admin('preview.searchProperties') ?? 'Search properties...') ?>,
        selectComponent: <?= json_encode(__admin('preview.selectComponent') ?? 'Select Component') ?>,
        selectComponentFirst: <?= json_encode(__admin('preview.selectComponentFirst') ?? 'Select a component first') ?>,
        selectComponentPlaceholder: <?= json_encode(__admin('preview.selectComponentPlaceholder') ?? '-- Select component --') ?>,
        selectEvent: <?= json_encode(__admin('preview.selectEvent') ?? 'Select event') ?>,
        selectEventAndFunction: <?= json_encode(__admin('preview.selectEventAndFunction') ?? 'Please select an event and function') ?>,
        selectFunction: <?= json_encode(__admin('preview.selectFunction') ?? 'Select function') ?>,
        selectApi: <?= json_encode(__admin('preview.selectApi') ?? 'Select API') ?>,
        selectEndpoint: <?= json_encode(__admin('preview.selectEndpoint') ?? 'Select endpoint') ?>,
        selectEventApiEndpoint: <?= json_encode(__admin('preview.selectEventApiEndpoint') ?? 'Please select an event, API, and endpoint') ?>,
        selectNodeFirst: <?= json_encode(__admin('preview.selectNodeFirst') ?? 'Select an element first') ?>,
        noElementSelected: <?= json_encode(__admin('preview.noElementSelected') ?? 'No element selected') ?>,
        noInteractionData: <?= json_encode(__admin('preview.noInteractionData') ?? 'No interaction data available') ?>,
        interactionNotFound: <?= json_encode(__admin('preview.interactionNotFound') ?? 'Interaction not found') ?>,
        functionGroupCore: <?= json_encode(__admin('preview.functionGroupCore') ?? 'Core Functions') ?>,
        functionGroupCustom: <?= json_encode(__admin('preview.functionGroupCustom') ?? 'Custom Functions') ?>,
        functionGroupOther: <?= json_encode(__admin('preview.functionGroupOther') ?? 'Other') ?>,
        selectorOrThis: <?= json_encode(__admin('preview.selectorOrThis') ?? 'selector or this') ?>,
        selectorsLoadError: <?= json_encode(__admin('preview.selectorsLoadError') ?? 'Failed to load selectors') ?>,
        selectProperty: <?= json_encode(__admin('preview.selectProperty') ?? 'Select property...') ?>,
        selectVariable: <?= json_encode(__admin('preview.selectVariable') ?? 'Select variable') ?>,
        state: <?= json_encode(__admin('preview.state') ?? 'State') ?>,
        states: <?= json_encode(__admin('preview.states') ?? 'States') ?>,
        style: <?= json_encode(__admin('preview.style') ?? 'Style') ?>,
        stylesReset: <?= json_encode(__admin('preview.stylesReset') ?? 'Styles reset') ?>,
        stylesSaved: <?= json_encode(__admin('preview.stylesSaved') ?? 'Styles saved') ?>,
        textContent: <?= json_encode(__admin('preview.textContent') ?? 'Text Content') ?>,
        textHintRaw: <?= json_encode(__admin('preview.textHintRaw') ?? 'Enter raw text. This will be displayed as-is.') ?>,
        textHintTranslation: <?= json_encode(__admin('preview.textHintTranslation') ?? 'Enter a translation key. Value will be looked up in translations.') ?>,
        textHintVariable: <?= json_encode(__admin('preview.textHintVariable') ?? 'Enter variable name (without {{ }}). Value will be passed from parent.') ?>,
        textModeNone: <?= json_encode(__admin('preview.textModeNone') ?? 'None (container only)') ?>,
        textModeRaw: <?= json_encode(__admin('preview.textModeRaw') ?? 'Raw Text') ?>,
        textModeTranslation: <?= json_encode(__admin('preview.textModeTranslation') ?? 'Translation Key') ?>,
        textModeVariable: <?= json_encode(__admin('preview.textModeVariable') ?? 'Variable {{...}}') ?>,
        textPlaceholderRaw: <?= json_encode(__admin('preview.textPlaceholderRaw') ?? 'e.g. Hello World') ?>,
        textPlaceholderTranslation: <?= json_encode(__admin('preview.textPlaceholderTranslation') ?? 'e.g. component.myButton.label') ?>,
        textPlaceholderVariable: <?= json_encode(__admin('preview.textPlaceholderVariable') ?? 'e.g. buttonText') ?>,
        textSaved: <?= json_encode(__admin('preview.textSaved') ?? 'Text saved') ?>,
        themeLoadError: <?= json_encode(__admin('preview.themeLoadError') ?? 'Failed to load theme') ?>,
        themeReset: <?= json_encode(__admin('preview.themeReset') ?? 'Theme reset') ?>,
        themeSaved: <?= json_encode(__admin('preview.themeSaved') ?? 'Theme saved') ?>,
        themeSaveError: <?= json_encode(__admin('preview.themeSaveError') ?? 'Failed to save theme') ?>,
        variableCollision: <?= json_encode(__admin('preview.variableCollision') ?? 'Variable name collision!') ?>,
        variableCollisionChild: <?= json_encode(__admin('preview.variableCollisionChild') ?? 'Variable used by child component!') ?>,
        variableCollisionChildHint: <?= json_encode(__admin('preview.variableCollisionChildHint') ?? 'is used by:') ?>,
        variableCollisionHint: <?= json_encode(__admin('preview.variableCollisionHint') ?? 'These variables exist in both parent and child:') ?>,
        variableDuplicate: <?= json_encode(__admin('preview.variableDuplicate') ?? 'Duplicate variable!') ?>,
        variableDuplicateHint: <?= json_encode(__admin('preview.variableDuplicateHint') ?? 'already exists in this component.') ?>,
        thisElement: <?= json_encode(__admin('preview.thisElement') ?? 'this element') ?>,
        toggleStates: <?= json_encode(__admin('preview.toggleStates') ?? 'Toggle States') ?>,
        transformEmpty: <?= json_encode(__admin('preview.transformEmpty') ?? 'No transform functions') ?>,
        transformValue: <?= json_encode(__admin('preview.transformValue') ?? 'translateX(10px) rotate(5deg)') ?>,
        transitionSaved: <?= json_encode(__admin('preview.transitionSaved') ?? 'Transition saved') ?>,
        useCustomProperty: <?= json_encode(__admin('preview.useCustomProperty') ?? 'Use custom:') ?>,
        varReplacementWarning: <?= json_encode(__admin('preview.varReplacementWarning') ?? 'CSS variables will be replaced with actual values') ?>
    }
};
</script>

<!-- Preview JavaScript -->
<script src="<?= rtrim(BASE_URL, '/') ?>/admin/assets/js/pages/preview.js?v=<?= filemtime(PUBLIC_FOLDER_ROOT . '/admin/assets/js/pages/preview.js') ?>"></script>
